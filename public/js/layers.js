L.GridLayer.DebugCoords=L.GridLayer.extend({createTile:function(e){var r=document.createElement("div");return r.innerHTML=[e.x,e.y-1,e.z].join(", "),r}}),L.gridLayer.debugCoords=function(e){return new L.GridLayer.DebugCoords(e)},map.addLayer(L.gridLayer.debugCoords({tileSize:250})),L.GridLayer.Lidar=L.GridLayer.extend({createTile:function(e,n){var d=document.createElement("canvas"),r=this.getTileSize();d.setAttribute("width",r.x),d.setAttribute("height",r.y);var o=d.getContext("2d"),t=e.x,a=Math.abs(e.y)-1;return fetch("/lidar?lat="+t+"&lon="+a).then(function(e){return e.json()}).then(function(e){for(var r=e.data,t=0;t<r.length;t++)for(var a=r[t],i=0;i<a.length;i++)a[i]<0&&(a[i]=0),o.fillStyle="rgba(0,0,0,"+a[i]/100+")",o.fillRect(i,t,1,1);n(null,d)}).catch(function(e){console.log(e)}),d}}),L.gridLayer.lidar=function(e){return new L.GridLayer.Lidar(e)},map.addLayer(L.gridLayer.lidar({tileSize:250,maxZoom:4,maxNativeZoom:2}));