L.GridLayer.DebugCoords=L.GridLayer.extend({createTile:function(e){var r=document.createElement("div");return r.innerHTML=[e.x,e.y-1,e.z].join(", "),r}}),L.gridLayer.debugCoords=function(e){return new L.GridLayer.DebugCoords(e)},map.addLayer(L.gridLayer.debugCoords({tileSize:250})),L.GridLayer.Lidar=L.GridLayer.extend({createTile:function(e,a){var d=document.createElement("canvas"),r=this.getTileSize();d.setAttribute("width",r.x),d.setAttribute("height",r.y);var o=d.getContext("2d"),t=e.x,i=Math.abs(e.y)-1;return fetch("/lidar?lat="+t+"&lon="+i).then(function(e){return e.json()}).then(function(e){for(var r=e.data,t=0;t<r.length;t++)for(var i=r[t],n=0;n<i.length;n++)i[n]<0&&(i[n]=0),o.fillStyle="rgba(0,0,0,"+i[n]/100+")",o.fillRect(n,t,1,1);a(null,d)}).catch(function(e){console.log(e)}),d}}),L.gridLayer.lidar=function(e){return new L.GridLayer.Lidar(e)},map.addLayer(L.gridLayer.lidar({tileSize:250}));