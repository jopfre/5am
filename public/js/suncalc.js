!function(){"use strict";var D=Math.PI,f=Math.sin,l=Math.cos,h=Math.tan,a=Math.asin,M=Math.atan2,d=Math.acos,y=D/180,e=864e5,t=2440588,r=2451545;function P(n){return new Date((n+.5-t)*e)}function b(n){return n.valueOf()/e-.5+t-r}var u=23.4397*y;function o(n,t){return M(f(n)*l(u)-h(t)*f(u),l(n))}function H(n,t){return a(f(t)*l(u)+l(t)*f(u)*f(n))}function v(n,t,e){return M(f(n),l(n)*f(t)-h(e)*l(t))}function g(n,t,e){return a(f(t)*f(e)+l(t)*l(e)*l(n))}function w(n,t){return y*(280.16+360.9856235*n)-t}function T(n){return y*(357.5291+.98560028*n)}function E(n){return n+y*(1.9148*f(n)+.02*f(2*n)+3e-4*f(3*n))+102.9372*y+D}function c(n){var t=E(T(n));return{dec:H(t,0),ra:o(t,0)}}var I={getPosition:function(n,t,e){var a=y*-e,r=y*t,u=b(n),o=c(u),i=w(u,a)-o.ra;return{azimuth:v(i,r,o.dec),altitude:g(i,r,o.dec)}}},k=I.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];I.addTime=function(n,t,e){k.push([n,t,e])};var x=9e-4;function z(n,t,e){return x+(n+t)/(2*D)+e}function C(n,t,e){return r+n+.0053*f(t)-.0069*f(2*e)}function O(n,t,e,a,r,u,o){var i,c;return C(z((i=e,c=a,d((f(n)-f(i)*f(c))/(l(i)*l(c)))),t,r),u,o)}function m(n){var t=y*(134.963+13.064993*n),e=y*(93.272+13.22935*n),a=y*(218.316+13.176396*n)+6.289*y*f(t),r=5.128*y*f(e),u=385001-20905*l(t);return{ra:o(a,r),dec:H(a,r),dist:u}}function S(n,t){return new Date(n.valueOf()+t*e/24)}I.getTimes=function(n,t,e){var a,r,u,o,i,c,d,s=y*-e,f=y*t,l=b(n),h=(c=l,d=s,Math.round(c-x-d/(2*D))),M=z(0,s,h),v=T(M),g=E(v),w=H(g,0),m=C(M,v,g),p={solarNoon:P(m),nadir:P(m-.5)};for(a=0,r=k.length;a<r;a+=1)i=m-((o=O((u=k[a])[0]*y,s,f,w,h,v,g))-m),p[u[1]]=P(i),p[u[2]]=P(o);return p},I.getMoonPosition=function(n,t,e){var a,r=y*-e,u=y*t,o=b(n),i=m(o),c=w(o,r)-i.ra,d=g(c,u,i.dec),s=M(f(c),h(u)*l(i.dec)-f(i.dec)*l(c));return d+=((a=d)<0&&(a=0),2967e-7/Math.tan(a+.00312536/(a+.08901179))),{azimuth:v(c,u,i.dec),altitude:d,distance:i.dist,parallacticAngle:s}},I.getMoonIllumination=function(n){var t=b(n||new Date),e=c(t),a=m(t),r=d(f(e.dec)*f(a.dec)+l(e.dec)*l(a.dec)*l(e.ra-a.ra)),u=M(149598e3*f(r),a.dist-149598e3*l(r)),o=M(l(e.dec)*f(e.ra-a.ra),f(e.dec)*l(a.dec)-l(e.dec)*f(a.dec)*l(e.ra-a.ra));return{fraction:(1+l(u))/2,phase:.5+.5*u*(o<0?-1:1)/Math.PI,angle:o}},I.getMoonTimes=function(n,t,e,a){var r=new Date(n);a?r.setUTCHours(0,0,0,0):r.setHours(0,0,0,0);for(var u,o,i,c,d,s,f,l,h,M,v,g,w,m=.133*y,p=I.getMoonPosition(r,t,e).altitude-m,D=1;D<=24&&(u=I.getMoonPosition(S(r,D),t,e).altitude-m,l=((d=(p+(o=I.getMoonPosition(S(r,D+1),t,e).altitude-m))/2-u)*(f=-(s=(o-p)/2)/(2*d))+s)*f+u,(M=0)<=(h=s*s-4*d*u)&&(v=f-(w=Math.sqrt(h)/(2*Math.abs(d))),g=f+w,Math.abs(v)<=1&&M++,Math.abs(g)<=1&&M++,v<-1&&(v=g)),1===M?p<0?i=D+v:c=D+v:2===M&&(i=D+(l<0?g:v),c=D+(l<0?v:g)),!i||!c);D+=2)p=o;var P={};return i&&(P.rise=S(r,i)),c&&(P.set=S(r,c)),i||c||(P[0<l?"alwaysUp":"alwaysDown"]=!0),P},"object"==typeof exports&&"undefined"!=typeof module?module.exports=I:"function"==typeof define&&define.amd?define(I):window.SunCalc=I}();